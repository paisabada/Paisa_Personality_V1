<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Paisa OG Name Placer — 1200×630</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  body { font-family: Arial, Helvetica, sans-serif; background:#f4f4f7; color:#111; display:flex; gap:20px; padding:20px; }
  .panel { width:360px; background:white; padding:16px; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.08); }
  label{display:block;margin:10px 0 6px;font-weight:600}
  input[type=text], input[type=email], input[type=tel], select { width:100%; padding:10px;border:1px solid #ddd;border-radius:6px; font-size:15px }
  button{padding:10px 12px;border-radius:6px;border:0;cursor:pointer;margin-top:10px}
  .btn-primary{background:#1f8efa;color:#fff}
  .btn-ghost{background:#fff;border:1px solid #ddd}
  canvas{border-radius:6px;box-shadow:0 10px 30px rgba(0,0,0,0.12); background:#000}
  .hint{font-size:13px;color:#666;margin-top:8px}
</style>
</head>
<body>

<div class="panel">
  <h3>Paisa OG Name Placer (1200×630)</h3>

  <label>Choose OG image</label>
  <select id="ogSelect">
    <!-- Change these filenames/URLs to where your OG images live -->
    <option value="budget_boss_og.png">Budget Boss (budget_boss_og.png)</option>
    <option value="risky_rockstar_og.png">Risky Rockstar (risky_rockstar_og.png)</option>
    <option value="investor_panda_og.png">Investor Panda (investor_panda_og.png)</option>
  </select>

  <label>Name (will be placed on image)</label>
  <input id="nameInput" type="text" placeholder="Type the name (e.g. Ravi)" maxlength="30" />

  <label>Mobile no</label>
  <input id="mobInput" type="tel" placeholder="Not drawn — saved for record" />

  <label>Email</label>
  <input id="emailInput" type="email" placeholder="Not drawn — saved for record" />

  <div style="display:flex;gap:8px;">
    <button id="applyBtn" class="btn-primary">Apply to canvas</button>
    <button id="downloadBtn" class="btn-ghost">Download PNG</button>
  </div>

  <div class="hint">
    Positioning is **common** for all three images: centered horizontally and placed in a fixed vertical band so it never overlaps art. Font auto-scales to fit.
  </div>
</div>

<div>
  <canvas id="ogCanvas" width="1200" height="630"></canvas>
  <div style="margin-top:8px; font-size:13px; color:#555">
    Preview (1200 × 630). Use "Download PNG" to save the result for testing.
  </div>
</div>

<script>
(function(){
  const canvas = document.getElementById('ogCanvas');
  const ctx = canvas.getContext('2d');

  // Common placement settings (works for all 3 OG images)
  const canvasW = canvas.width, canvasH = canvas.height;
  const nameY = Math.round(canvasH * 0.62); // vertical position where the name will sit
  const maxNameWidth = Math.round(canvasW * 0.78); // name won't exceed this width
  const fontBase = '700'; // font weight
  const fontFamily = 'Poppins, Arial, sans-serif';
  const nameColor = '#ffffff'; // white by default (works on these OG images), adjust if required
  const shadowColor = 'rgba(0,0,0,0.45)';

  const ogSelect = document.getElementById('ogSelect');
  const nameInput = document.getElementById('nameInput');
  const applyBtn = document.getElementById('applyBtn');
  const downloadBtn = document.getElementById('downloadBtn');

  let currentImage = new Image();
  currentImage.crossOrigin = "anonymous"; // allow download if image served with CORS

  function drawBase(img) {
    // clear
    ctx.clearRect(0,0,canvasW,canvasH);
    // draw image centered/scaled to cover canvas (keep aspect)
    const ratio = Math.max(canvasW/img.width, canvasH/img.height);
    const iw = img.width*ratio, ih = img.height*ratio;
    const ix = (canvasW - iw)/2, iy = (canvasH - ih)/2;
    ctx.drawImage(img, ix, iy, iw, ih);
  }

  function drawNameOnCanvas(name) {
    // draw name centered at nameY with auto-scaling
    if (!name) return; // nothing to draw
    // initial font size guess
    let fontSize = 110; // start big
    ctx.textBaseline = 'middle';
    ctx.textAlign = 'center';
    // shrink until it fits
    ctx.font = `${fontBase} ${fontSize}px ${fontFamily}`;
    let measured = ctx.measureText(name).width;
    while (measured > maxNameWidth && fontSize > 18) {
      fontSize -= 2;
      ctx.font = `${fontBase} ${fontSize}px ${fontFamily}`;
      measured = ctx.measureText(name).width;
    }
    // draw soft shadow for legibility
    ctx.save();
    ctx.shadowColor = shadowColor;
    ctx.shadowBlur = 8;
    ctx.fillStyle = nameColor;
    ctx.fillText(name, canvasW/2, nameY);
    ctx.restore();
  }

  function renderCurrent() {
    if (!currentImage.complete) return;
    drawBase(currentImage);
    drawNameOnCanvas(nameInput.value.trim());
  }

  // load initial image
  function loadImage(src) {
    const img = new Image();
    img.crossOrigin = "anonymous";
    img.onload = function(){
      currentImage = img;
      renderCurrent();
    };
    img.onerror = function(){
      // show a simple blank fallback and message
      ctx.clearRect(0,0,canvasW,canvasH);
      ctx.fillStyle = '#ddd';
      ctx.fillRect(0,0,canvasW,canvasH);
      ctx.fillStyle = '#333';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.font = '18px Arial';
      ctx.fillText('Image failed to load. Check filename or URL.', canvasW/2, canvasH/2);
    };
    img.src = src;
  }

  // wire UI
  ogSelect.addEventListener('change', function(){
    loadImage(this.value);
  });

  applyBtn.addEventListener('click', function(){
    renderCurrent();
  });

  // live preview when name typed
  nameInput.addEventListener('input', function(){
    // live redraw
    renderCurrent();
  });

  // download for testing
  downloadBtn.addEventListener('click', function(){
    // ensure image drawn
    renderCurrent();
    const link = document.createElement('a');
    link.download = 'paisa_result.png';
    link.href = canvas.toDataURL('image/png');
    link.click();
  });

  // load default
  loadImage(ogSelect.value);

})();
</script>
</body>
</html>
